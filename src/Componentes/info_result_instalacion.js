import * as React from 'react';
import { StyleSheet, Text, View, TouchableOpacity, Dimensions, LogBox} from 'react-native';
import tec2 from '../../assets/tec3.jpg'; 
import ImageOverlay from "react-native-image-overlay";
import Icon from 'react-native-vector-icons/FontAwesome';
import {db} from '../../fire';


var {height} = Dimensions.get('window');

export class InfoResultInsta extends React.Component {

  constructor() {
    
   
    super();
    this.state = {
      todos: {},
      presentToDo: '',
      
    };
    
  }

  
  
  viabilidadTotal() {

    var data,key
    LogBox.ignoreLogs(["Setting a timer"]);

     db.ref('/Usuario/').on('child_added', querySnapShot => {
    key = querySnapShot.key;
            
      console.warn('key: ',key)
     
      //console.warn('todoitems', todoItems)
      
    });
    
     db.ref('/Usuario/' + key).set({
      Viabilidad: '100%'
      
    })

    // Get the unique key generated by push()
    //var postId = newPostRef.key;
    //console.warn(postId)
       
    this.setState({
      presentToDo: '',
    });
  }
    
     

  viabilidadParcial() {
    db.ref('/Viabilidad').push({
      Viabilidad: '50%'
         });
      
    
    this.setState({
      presentToDo: '',
    });
  }



  noViable() {
    db.ref('/Viabilidad').push({
      Viabilidad: '0%'
      
    });
       
    this.setState({
      presentToDo: '',
    });
  }


  clearViabilidad() {
    db.ref('/Viabilidad').remove();
  }

  componentDidMount() {
    LogBox.ignoreLogs(["Setting a timer"]);

    db.ref('/Usuario').on('value', querySnapShot => {
      let data = querySnapShot.val() ? querySnapShot.val() : {};
      //console.warn('data',data)
      let todoItems = {...data};
      //console.warn('todoitems', todoItems)
      this.setState({
        todos: todoItems,
      });
    });
  } 

  render() {

    
  
  return (  
       
       <ImageOverlay 
         source={tec2}
         height={height}>

        <View>
          <View  style={{marginTop: '0%', marginBottom: '1%'}}>
                   
                        
              <Text style={{color: '#000',
                      backgroundColor: 'white',
                      fontSize: 15,
                      marginHorizontal: 15,
                      textAlign: 'center',
                      marginTop: 0,
                      marginBottom: 5,
                      fontWeight: 'bold',
                      padding: 10,
                      borderRadius:0}}>Viabilidad instalación CLIENTE:


               </Text>

          </View>
                   
          
        <View>
             <TouchableOpacity
              onPress={() => this.viabilidadTotal()}
              >
              <View
                style={styles.btnContainer1}>
                <Icon
                  name="thumbs-up"
                  size={50}
                  color="black"
                  style={styles.btnIcon}/>
    
                <Text style={styles.btnText}>100% de la oferta</Text>
              </View>
            </TouchableOpacity>
         



             <TouchableOpacity
              onPress={() => this.viabilidadParcial()}
              >
              <View
                style={styles.btnContainer2}>
                <Icon
                  name="thumbs-up"
                  size={50}
                  color="black"
                  style={styles.btnIcon}/>
    
                <Text style={styles.btnText}>Oferta a la baja</Text>
              </View>
            </TouchableOpacity>
       

      
             <TouchableOpacity
              onPress={() => this.noViable()}
              >
              <View
                style={styles.btnContainer3}>
                <Icon
                  name="ban"
                  size={50}
                  color="black"
                  style={styles.btnIcon}/>
    
                <Text style={styles.btnText}>No es posible la instalación</Text>
              </View>
            </TouchableOpacity>

            <TouchableOpacity
            onPress={() => this.clearViabilidad()}
            >
            <View
              style={{
  
                justifyContent: 'center',
                borderRadius: 5,
                backgroundColor: 'grey',
                padding: 15,
                textAlign:'center',
                alignItems:'center',
                flexDirection: 'column',
                width:'100%',
                height:'30%',
                marginBottom:'2%', marginTop:'5%'
            
              
              }}>
              
  
              <Text style={styles.btnText}>Borrar viabilidad</Text>
            </View>
          </TouchableOpacity>
        </View>
        </View>
        </ImageOverlay>
        
   
  )}

  
  

}



const styles = StyleSheet.create({

  fondo: {
    width: '100%'
        
  },
  btnContainer1: {
    
    justifyContent: 'center',
    borderRadius: 15,
    backgroundColor: 'green',
    padding: 15,
    textAlign:'center',
    alignItems:'center',
    flexDirection: 'column',
    width:300,
    height:100,
    marginBottom:10, marginTop:30

  
  },

   btnContainer2: {
    
    justifyContent: 'center',
    borderRadius: 15,
    backgroundColor: 'orange',
    padding: 15,
    textAlign:'center',
    alignItems:'center',
    flexDirection: 'column',
    width:300,
    height:100,
    marginBottom:10, marginTop:10

  
  },


   btnContainer3: {
   
    justifyContent: 'center',
    borderRadius: 15,
    backgroundColor: 'red',
    padding: 20,
    textAlign:'center',
    alignItems:'center',
    flexDirection: 'column',
    width:300,
    height:110,
    marginBottom:'1%', marginTop:10

  
  },
  btnIcon: {
    height: 50,
    width: 50,
  },
  btnText: {
    fontSize: 18,
    color: '#FAFAFA',
    marginLeft: 0,
    marginTop: 5,
    textAlign:'center',
    fontWeight: 'bold'

  }

});